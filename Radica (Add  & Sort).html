<!DOCTYPE html>
<html>
    <head>
      <title>Add & Sort</title>
    </head>
    <body style='text-align: center;'>

        <!-- create inout boxes & button -->
        <input type="text" name="userID" id="userID" value="1" disabled/>
        <input type="text" name="userName" id="userName" placeholder="UserName"/>
        <input type="text" name="userOccupation" id="userOccupation" placeholder="UserOccupation"/>
        <input type="button" id="add" value="Add" onClick="addUser()">
        <br><br><br>

        <!-- create drop down list -->
        Sort by
        <select id="sort" onchange="display()">
            <option value="UserID">UserID</option>
            <option value="UserName">UserName</option>
            <option value="UserOccupation">UserOccupation</option>
        </select>

        <br><br><br><br><br>

        <!-- create table -->
        <table id="table" border="1" align="center">
            <tbody id="tbody">

            </tbody>
        </table>
    </body>
</html>

<script>
    var id;
    var name;
    var occupation;

    // crate array to store users data
    var users = [];

    function addUser(){

      // get data from the input boxes
      id = document.getElementById("userID").value;
      name = document.getElementById("userName").value;
      occupation  = document.getElementById("userOccupation").value;

      // push data into users array
      users.push([id, name, occupation]);

      // get current userID and update
      var newUserID = document.getElementById("userID").value;
      newUserID++;

      // update the new userID in the input box
      document.getElementById("userID").value = newUserID;

      // reset the userName & userOccupation input box
      document.getElementById('userName').value='';
      document.getElementById('userOccupation').value='';
    }

    function display() {

      // retrieve type of sort from drop down list
      var sortBy = document.getElementById("sort").value;

      // delete existed row in table before produce the new one according to sort type
      for (let i = 0; i < users.length; i++) {
        document.getElementById("table").deleteRow(-1);
      }

      // sort by user ID
      if(sortBy == "UserID"){

        // loop to go through all the users array by row
        for (let i = 0; i < users.length; i++) {

          // create table body
          var tBody = document.getElementById("tbody");
          var idColumn = document.createElement("td");
          var nameColumn = document.createElement("td");
          var occupationColumn = document.createElement("td");
          var row = document.createElement("tr");

          // call sort function
          users.sort(sortFunction);

          // ref = https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
          function sortFunction(a, b) {
              if (a[0] === b[0]) {
                  return 0;
              }
              else {
                  return (a[0] < b[0]) ? -1 : 1;
              }
          }

          // retrieve user data from array column by column
          idColumn.innerHTML = users[i][0];
          nameColumn.innerHTML = users[i][1];
          occupationColumn.innerHTML  = users[i][2];

          // append the columns into a row
          row.appendChild(idColumn);
          row.appendChild(nameColumn);
          row.appendChild(occupationColumn);

          // append the row into tBody
          tBody.appendChild(row);
        }
      }

      // sort by user name
      else if(sortBy == "UserName"){

        // loop to go through all the users array by row
        for (let i = 0; i < users.length; i++) {

          // create table body
          var tBody = document.getElementById("tbody");
          var idColumn = document.createElement("td");
          var nameColumn = document.createElement("td");
          var occupationColumn = document.createElement("td");
          var row = document.createElement("tr");

          // call sort function
          users.sort(sortFunction);

          // ref = https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
          function sortFunction(a, b) {
              if (a[1] === b[1]) {
                  return 0;
              }
              else {
                  return (a[1] < b[1]) ? -1 : 1;
              }
          }

          // retrieve user data from array column by column
          idColumn.innerHTML = users[i][0];
          nameColumn.innerHTML = users[i][1];
          occupationColumn.innerHTML  = users[i][2];

          // append the columns into a row
          row.appendChild(idColumn);
          row.appendChild(nameColumn);
          row.appendChild(occupationColumn);

          // append the row into tBody
          tBody.appendChild(row);
        }
      }

      // sort by user occupation
      else if(sortBy == "UserOccupation"){

        // loop to go through all the users array by row
        for (let i = 0; i < users.length; i++) {

          // create table body
          var tBody = document.getElementById("tbody");
          var idColumn = document.createElement("td");
          var nameColumn = document.createElement("td");
          var occupationColumn = document.createElement("td");
          var row = document.createElement("tr");

          // call sort function
          users.sort(sortFunction);

          // ref = https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
          function sortFunction(a, b) {
              if (a[2] === b[2]) {
                  return 0;
              }
              else {
                  return (a[2] < b[2]) ? -1 : 1;
              }
          }

          // retrieve user data from array column by column
          idColumn.innerHTML = users[i][0];
          nameColumn.innerHTML = users[i][1];
          occupationColumn.innerHTML  = users[i][2];

          // append the columns into a row
          row.appendChild(idColumn);
          row.appendChild(nameColumn);
          row.appendChild(occupationColumn);

          // append the row into tBody
          tBody.appendChild(row);
        }
      }

    }
</script>
