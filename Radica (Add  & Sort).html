<!DOCTYPE html>
<html>
    <head>
      <title>Sort</title>
    </head>
    <body>
        <input type="text" name="userID" id="userID" value="1" disabled />
        <input type="text" name="userName" id="userName" placeholder="UserName" />
        <input type="text" name="userOccupation" id="userOccupation" placeholder="UserOccupation"/>
        <input type="button" id="add" value="Add" onClick="addUser()">
        <br><br><br>

        Sort by
        <select id="sort" onchange="display()">
            <option value="UserID">UserID</option>
            <option value="UserName">UserName</option>
            <option value="UserOccupation">UserOccupation</option>
        </select>

        <br><br><br><br><br>

        <table id="table" border="1">
            <tbody id="tbody">

            </tbody>
        </table>
    </body>
</html>

<script>
    var id;
    var name;
    var occupation;

    // crate array to store users data
    var users = [];

    function addUser(){

      // get data from the input boxes
      id = document.getElementById("userID").value;
      name = document.getElementById("userName").value;
      occupation  = document.getElementById("userOccupation").value;

      // push data into users array
      users.push([id, name, occupation]);

      // get current userID and update
      var a = document.getElementById("userID").value;
      a++;

      // update the new userID in the input box
      document.getElementById("userID").value = a;

      // reset the userName & userOccupation input box
      document.getElementById('userName').value='';
      document.getElementById('userOccupation').value='';
    }

    function display() {

      // retrieve type of sort from drop down list
      var sortBy = document.getElementById("sort").value;

      // sort by user ID
      if(sortBy == "UserID"){

        // delete existed row in table before produce the new one according to sort type
        for (let i = 0; i < users.length; i++) {
          document.getElementById("table").deleteRow(-1);
        }

        // loop to go through all the users array
        for (let i = 0; i < users.length; i++) {

          // create table body
          var tBody = document.getElementById("tbody");
          var id = document.createElement("td");
          var name = document.createElement("td");
          var job = document.createElement("td");
          var row = document.createElement("tr");

          // call sort function
          users.sort(sortFunction);

          // ref = https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
          function sortFunction(a, b) {
              if (a[0] === b[0]) {
                  return 0;
              }
              else {
                  return (a[0] < b[0]) ? -1 : 1;
              }
          }

          // retrieve user data  from array row by row
          id.innerHTML = users[i][0];
          name.innerHTML = users[i][1];
          job.innerHTML  = users[i][2];


          // append the data into a row
          row.appendChild(id);
          row.appendChild(name);
          row.appendChild(job);

          // append the row into tBody
          tBody.appendChild(row);

        }
      }

      // sort by user name
      else if(sortBy == "UserName"){

        // delete existed row in table before produce the new one according to sort type
        for (let i = 0; i < users.length; i++) {
          document.getElementById("table").deleteRow(-1);
        }

        // loop to go through all the users array
        for (let i = 0; i < users.length; i++) {

          // create table body
          var tBody = document.getElementById("tbody");
          var id = document.createElement("td");
          var name = document.createElement("td");
          var job = document.createElement("td");
          var row = document.createElement("tr");

          // call sort function
          users.sort(sortFunction);

          // ref = https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
          function sortFunction(a, b) {
              if (a[1] === b[1]) {
                  return 0;
              }
              else {
                  return (a[1] < b[1]) ? -1 : 1;
              }
          }

          // retrieve user data  from array row by row
          id.innerHTML = users[i][0];
          name.innerHTML = users[i][1];
          job.innerHTML  = users[i][2];

          // append the data into a row
          row.appendChild(id);
          row.appendChild(name);
          row.appendChild(job);

          // append the row into tBody
          tBody.appendChild(row);
        }
      }

      // sort by user occupation
      else if(sortBy == "UserOccupation"){

        // delete existed row in table before produce the new one according to sort type
        for (let i = 0; i < users.length; i++) {
          document.getElementById("table").deleteRow(-1);
        }

        // loop to go through all the users array
        for (let i = 0; i < users.length; i++) {

          // create table body
          var tBody = document.getElementById("tbody");
          var id = document.createElement("td");
          var name = document.createElement("td");
          var job = document.createElement("td");
          var row = document.createElement("tr");

          // call sort function
          users.sort(sortFunction);

          // ref = https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
          function sortFunction(a, b) {
              if (a[2] === b[2]) {
                  return 0;
              }
              else {
                  return (a[2] < b[2]) ? -1 : 1;
              }
          }

          // retrieve user data  from array row by row
          id.innerHTML = users[i][0];
          name.innerHTML = users[i][1];
          job.innerHTML  = users[i][2];

          // append the data into a row
          row.appendChild(id);
          row.appendChild(name);
          row.appendChild(job);

          // append the row into tBody
          tBody.appendChild(row);
        }
      }

    }
</script>
